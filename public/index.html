<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Company Portal — Sign in</title>
<style>
  :root {
    --bg:#f3f4f6;
    --card:#fff;
    --accent:#2D68C4;
    --danger:#e02424;
    font-family:"Segoe UI",Inter,Roboto,Helvetica,Arial,sans-serif;
  }

  html,body{
    height:100%;margin:0;
    background:var(--bg);
    display:flex;align-items:center;justify-content:center;
  }

  .card{
    background:var(--card);
    padding:60px;
    width:100%;
    max-width:480px;
    box-shadow:0 4px 40px rgba(0,0,0,.08);
    border:1px solid #ddd;
  }

  .logo{width:160px;margin-bottom:40px;text-align:left;}
  input{
    width:100%;padding:14px 0;
    border:none;border-bottom:2px solid #ccc;
    background:transparent;font-size:18px;
    outline:none;
  }
  input:focus{border-color:var(--accent);}
  .btn{
    margin-top:25px;padding:10px 28px;
    background:var(--accent);color:#fff;
    font-weight:600;border:none;cursor:pointer;
    transition:background .15s ease,transform .1s ease;
  }
  .btn:hover{background:#2150a1;transform:translateY(-1px);}
  .error{color:var(--danger);font-size:14px;margin-top:8px;}
  footer{text-align:center;color:#666;margin-top:60px;}
  a{color:var(--accent);text-decoration:none;}

  /* popup animation */
  #popup{
    display:none;
    position:fixed;
    top:40%;
    left:50%;
    transform:translate(-50%,-50%);
    background:#2D68C4;
    color:#fff;
    padding:18px 36px;
    border-radius:8px;
    font-weight:600;
    opacity:0;
    transition:opacity .6s ease;
    z-index:1000;
  }
</style>
</head>
<body>
<section class="card">
  <div class="logo">
    <img src="https://upload.wikimedia.org/wikipedia/commons/a/ab/Logo_TV_2015.png" width="160" alt="Logo">
  </div>
  <h3>Sign in</h3>

  <form id="loginForm">
    <div id="emailStep">
      <input id="email" type="text" placeholder="Enter email" required>
      <div class="error" id="emailErr"></div>
      <button class="btn" type="button" id="nextBtn">Next</button>
    </div>

    <div id="passStep" style="display:none;">
      <input id="password" type="password" placeholder="Enter password" required>
      <div class="error" id="passErr"></div>
      <button class="btn" type="submit">Sign in</button>
    </div>
  </form>

  <footer>Need help? <a href="#">Contact support</a></footer>
</section>

<div id="popup">✅ Login Successful!</div>

<script>
  const emailStep=document.getElementById("emailStep");
  const passStep=document.getElementById("passStep");
  const nextBtn=document.getElementById("nextBtn");
  const emailInput=document.getElementById("email");
  const passInput=document.getElementById("password");
  const passErr=document.getElementById("passErr");
  const popup=document.getElementById("popup");

  nextBtn.onclick=()=>{
    const email=emailInput.value.trim();
    if(!email){
      document.getElementById("emailErr").textContent="Please enter your email.";
      return;
    }
    document.getElementById("emailErr").textContent="";
    emailStep.style.display="none";
    passStep.style.display="block";
    passInput.focus();
  };

  document.getElementById("loginForm").onsubmit=async(e)=>{
    e.preventDefault();
    passErr.textContent="";
    const email=emailInput.value.trim();
    const password=passInput.value.trim();

    const res=await fetch("/login",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({username:email,password})
    });

    if(res.ok){
      showPopup(email);
      setTimeout(()=>window.location="/dashboard.html",2000);
    }else{
      const msg=await res.text();
      passErr.textContent=msg;
    }
  };

  function showPopup(email){
    popup.textContent=`✅ Welcome back, ${email}!`;
    popup.style.display="block";
    setTimeout(()=>popup.style.opacity=1,50);
    setTimeout(()=>{
      popup.style.opacity=0;
      setTimeout(()=>popup.style.display="none",600);
    },1600);
  }
</script>
</body>
</html>
